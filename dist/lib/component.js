/* grapper - 1.1.0-beta.next [component] */ (()=>{var En="function",pe="undefined",w="object",k="string",q="array",v="number",V="boolean",$n="date",Nn="symbol";var H=(t,e)=>typeof t===e,W=(t,e)=>t instanceof e,g=t=>H(t,w),N=t=>H(t,k),f=t=>H(t,En),me=t=>H(t,v)&&!isNaN(t),ct=t=>!Number.isNaN(t),E=t=>H(t,pe),ye=t=>H(t,Nn),ge=t=>H(t,V),_=t=>Array.isArray(t),Mt=t=>W(t,Date)&&!isNaN(t),b=t=>t===null,at=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());function xn(t){if(N(t))try{return JSON.parse(`{${t.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(e=>!["",";",","].includes(e.trim())).map(e=>e.split(":")).map(e=>`"${e[0].trim()}":${L(e[1].trim(),void 0,!0)}`).join(",")}}`)}catch{try{return L(t)}catch(n){console.error(n);return}}if(g(t))return t}function Ee(t){if(N(t))return t.trim().startsWith("[")?(t.match(/\[(.*?)[^\]]]/g)||[]).map(e=>Ee(e.substring(1,e.length-1))):t.split(/[,;]/).map(e=>L(e.trim()));if(_(t))return t}function L(t,e,n=!1){if(!N(t))return t;if(t=Sn(t.trim()),e===q)return Ee(t);if(e===w)return xn(t);if(E(e)||e===v){if(E(t)||t==="")return;let r=+t;if(ct(r)||e===v)return r}if(E(e)||e===V){if(t==="true")return!0;if(t==="false")return!1;if(e===V)return t==="0"?!1:!!t}if(e===$n){try{let r=new Date(t);if(ct(r.getTime()))return r}catch{}return}if(E(e)||e===k)return n?`"${t}"`:t}function Sn(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t}function ut(t){return/^\s*{/.test(t)&&/}\s*$/.test(t)}function lt(t){return/^\s*\[/.test(t)&&/]\s*$/.test(t)}function ft(t){let e=[],n=t.split(/(\r\n|\r|\n)/).map(r=>r.trim()).filter(r=>r);return n.length===0?[]:n.length===1?L(n[0]):n.reduce((r,i,o)=>{let a={},s=i.split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(c=>!["",";",","].includes(c.trim()));return o===0?(e=[...s.map(c=>L(c))],r):(s.forEach((c,l)=>{a[e[l]]=L(c)}),r.push(a),r)},[])}function J(t){let e=`return (${t});`,n=new Function(e)();return f(n)?n():n}var $e=new WeakSet,et=!1,It=(t,e)=>!g(t)||b(t)||!f(e)?t:function n(r){if($e.has(r))return r;for(let o in r)g(r[o])&&!b(r[o])&&(r[o]=n(r[o]));let i=new Proxy(r,{get(o,a){let s=Reflect.get(r,a);return f(s)&&Mt(o)&&N(a)&&a.substring(0,3)==="set"&&f(e)&&(s=function(...c){let l=Reflect.get(o,a).apply(o,c);return!et&&e(t),l}),Mt(o)?s.bind(o):s},set(o,a,s){let c,l=o[a]===s;return g(s)&&!b(s)?c=Reflect.set(o,a,n(s)):c=Reflect.set(o,a,s),!et&&!l&&e(t),c},deleteProperty(o,a){let s=Reflect.deleteProperty(o,a);return!et&&e(t),s}});return $e.add(i),i}(t);It.stop=()=>et=!0;It.start=()=>et=!1;var ht=It;var nt=!1,dt=!0;function An(t){return t===null?null:t.constructor?new t.constructor:{}}function B(t){if(!g(t))return t;let e=t===null?null:Object.assign(An(t),t);for(let n in e)g(e[n])&&(e[n]=B(e[n]));return e}function Ne(t,e){let n=[],r=[];function i(a,s){if(b(a)||b(s))return nt;if(f(a.valueOf)&&f(s.valueOf)&&(a!==a.valueOf()||s!==s.valueOf()))return a.valueOf()===s.valueOf()&&a.constructor===s.constructor;if(n.indexOf(a)>-1&&r.indexOf(s)>-1)return dt;let c=Object.keys(a),l=Object.keys(s);if(c.length!==l.length)return nt;if(c.length>0){n.push(a),r.push(s);let d=c.length;for(;d--;){let h=c[d];if(!o(a[h],s[h]))return nt}}return dt}function o(a,s){if(a===s)return dt;let c=typeof a;return c!==typeof s?nt:c===v&&isNaN(a)&&isNaN(s)?dt:c===w?i(a,s):nt}return o(t,e)}function xe(t,e){let n=t,r=N(e)?e.split("."):e;for(let i=0;i<r.length;i++){if(E(n[r[i]]))return;n=n[r[i]]}return n}function pt(t,...e){if(typeof t!="object"||t===null)throw new TypeError("Target must be a non-null object");return e.forEach(n=>{typeof n!="object"||n===null||Object.keys(n).forEach(r=>{let i=n[r],o=t[r];i&&typeof i=="object"?((!o||typeof o!="object")&&(t[r]=Array.isArray(i)?[]:{}),pt(t[r],i)):t[r]=i})}),t}var $=Symbol(),G=Symbol(),x=Symbol(),Pt=Object.defineProperty;function wn(t,e,n,r=!1){if(!(t.ready===!1||!e))if(r)n?t.setAttribute(e,""):t.removeAttribute(e);else{let i=b(n)||E(n)?"":n.toString();t.hasAttribute(e)&&t.getAttribute(e)!==i&&t.setAttribute(e,i)}}function Tn(t){this[$]={};let e=t;do{let n=mt.get(e);for(let r in n)if(n.hasOwnProperty(r)&&this.hasOwnProperty(r)){let i=this[r];delete this[r],this[r]=E(i)?B(n[r]):i}else r in this[$]||(this[$][r]=B(n[r]));e=Object.getPrototypeOf(e)}while(e!==HTMLElement)}function bn(){new MutationObserver(t=>{t.some(e=>!e.attributeName)&&this[x]("update"),(E(this.ready)||this.ready)&&f(this[G])&&this[G](t)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var mt=new WeakMap,X=class extends HTMLElement{constructor(){super(),Tn.call(this,new.target),f(this[G])&&bn.call(this)}[x](e,n={},r=!1){return this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n,composed:r}))}};function Rn(t,e){e.propertyName||(e.propertyName=at(e.name)),Ae(t,{...e,name:e.propertyName,attribute:e.name});let n=Object.getPrototypeOf(t),r="observedAttributes",i=Object.getOwnPropertyDescriptor(t,r),o=Object.getOwnPropertyDescriptor(n,r),a=i?i.get:void 0;Pt(t,r,vn(t,e,n,a,i,o));let s="attributeChangedCallback",c=Object.getOwnPropertyDescriptor(t.prototype,s),l=Object.getOwnPropertyDescriptor(n.prototype,s),d=c?c.value:void 0;Pt(t.prototype,s,On(e,d,l))}function On(t,e,n){return{value:function(r,i,o){if(t.name===r){let a=t.propertyName;this[a]!==o&&(t.type===V?this[a]=this.hasAttribute(t.name):this[a]=L(o,t.type))}else e&&e.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function vn(t,e,n,r,i,o){let a={enumerable:!1,configurable:!0};return i?o?a.get=function(){return[e.name,...r.call(t),...o.get.call(n)]}:a.get=function(){return[e.name,...r.call(t)]}:a.get=o?function(){return[e.name,...o.get.call(n)]}:function(){return[e.name]},a}function Ae(t,e){Pt(t.prototype,e.name,{set:we(e),get:Ln(e),configurable:!0,enumerable:!1}),mt.has(t)||mt.set(t,{}),mt.get(t)[e.name]=e.value}function Cn(t,e){b(t.posUpdateEvent)||(t.posUpdateEvent?this[x](t.posUpdateEvent,{[t.name]:e}):this[x]("update",{[t.name]:e})),f(t.posUpdate)?t.posUpdate.call(this,e):f(this[t.posUpdate])&&this[t.posUpdate]()}function we(t){return function(e){let n=this[$];f(t.preUpdate)&&!t.preUpdate.call(this,e)||(t.schema&&(ht.stop(),e=t.schema.normalize(e),ht.start()),!(!g(e)&&Ne(n[t.name],e))&&(f(t.set)?t.set.call(this,e):n[t.name]=N(e)&&t.type?L(e,t.type):e,t.attribute&&![q,w].includes(t.type)&&wn(this,t.attribute,e,t.type===V),Cn.call(this,t,e)))}}function Ln(t){return function(){if(f(t.get))return t.get.call(this);{let e=this[$];switch(t.type){case v:return E(e[t.name])?void 0:Number(e[t.name]);case V:return!!e[t.name];case w:case q:return ht(e[t.name]||(t.type===w?{}:[]),n=>we(t).call(this,n));default:return e[t.name]}}}}function Se(t,e){e=e.toLowerCase(),customElements.get(e)||customElements.define(e,t)}function Te(t,e={}){return e.prop=(...n)=>(n.forEach(r=>Ae(t,{...r})),e),e.attr=(...n)=>(n.forEach(r=>Rn(t,{...r})),e),e.tag=n=>(Se(t,n),e),e.alias=n=>(Se(class extends t{},n),e),e.extension=e.ext=n=>(n.call(e,e,t),e),e}X.CHANGE=G;X.FIRE_EVENT=x;function Dt(t,e){let n=new WeakMap;return function(...r){clearTimeout(n.get(this)),n.set(this,setTimeout(()=>{t.apply(this,r)},e))}}function Ut(t,e){let n=new WeakMap,r=[];return function(...i){return clearTimeout(n.get(this)),new Promise((o,a)=>{r.push({resolve:o,reject:a}),n.set(this,setTimeout(()=>{try{let s=t.apply(this,i);r.forEach(c=>c.resolve(s))}catch(s){r.forEach(c=>c.reject(s))}finally{r.length=0}},e))})}}function Ft(t,e){return function(...n){if(t.apply(this,n))return e.apply(this,n)}}function Vt(t,e){return function(...n){let r=t.apply(this,n);return f(r.then)?r.then(i=>e.call(this,i)||i):e.call(this,r)||r}}var be=1,Ht=Symbol(),Bt=Symbol(),K=Symbol(),P=Symbol(),Re=Symbol(),kt=Symbol(),Oe=(t,e)=>t[e]?.forEach(n=>f(n)&&n.apply(t)),R=class extends X{constructor(e){super(),this.attachShadow({mode:"open"}),this[$].ready=e||!1,this[$].rendered=!1,E(e)&&(this.ready=!0)}get ready(){return this[$].ready}set ready(e){let n=this[$],r=n.ready;n.ready=!!e,r===!1&&n.ready===!0&&(this[x]("ready",{ready:!0}),f(this[P])&&this[P]())}get rendered(){return this[$].rendered}set rendered(e){let n=this[$],r=n.rendered;n.rendered=!!e,r===!1&&n.rendered===!0&&this[x]("render",{rendered:!0})}connectedCallback(){let e=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,r=()=>{let{width:i,height:o}=this.getBoundingClientRect(),a=getComputedStyle(this).flexDirection;(i!==e.width||o!==e.height||a!==n)&&(f(this[Re])&&this[Re](i,o,i-e.width,o-e.height),e={width:i,height:o},n=a,this[x]("resize",e)),this[$]._resizeObserver=window.requestAnimationFrame(r)};r(),Oe(this,Ht)}disconnectedCallback(){window.cancelAnimationFrame(this[$]._resizeObserver),Oe(this,Bt)}};R.prototype[Ht]=[];R.prototype[Bt]=[];function _n(t,e){let n={name:e.name.startsWith("--")?e.name:`--${e.name}`,initialValue:e.initialValue??e.value??"",syntax:e.syntax??"*",inherits:e.inherits??!0};t.prototype[kt]||(t.prototype[kt]={}),t.prototype[kt][n.name]=n}function Mn(t){if(f(t.prototype[P])){let e=t.prototype[P];t.prototype[P]=Ft(function(){return this.rendered=!1,this.ready},Ut(Vt(async function(){return e.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&f(this[K])&&this[K]()}),be))}if(f(t.prototype[K])){let e=t.prototype[K];t.prototype[K]=Ft(function(n){return n&&(this[$].rendered=!0),this.ready&&this[$].rendered},Ut(Vt(async function(...n){return e.apply(this,n)},function(){this[x]("refresh")}),be))}}function gt(t){Mn(t);let e=Te(t,{style:(...n)=>(n.forEach(r=>_n(t,{...r})),e)});return e}R.RENDER=P;R.REFRESH=K;R.ONCONNECT=Ht;R.ONDISCONNECT=Bt;var In="intersection.enter",Pn="intersection.exit",Et=Symbol();function Dn(t){let e=i=>{setTimeout(()=>(this._el||this.svg?._el||this).dispatchEvent(new CustomEvent(i,{bubbles:!0,cancelable:!0,composed:!0})),50)},n=!0,r=!1;this[Et]&&this[Et].disconnect(),this[Et]=new IntersectionObserver(i=>{i.forEach(o=>{o.isIntersecting&&o.intersectionRatio>=t?r||(r=!0,e(In)):(r||n)&&(r=!1,e(Pn))}),n=!1},{root:null,rootMargin:"0px",threshold:Array(21).fill(0).map((i,o)=>o*.05)}),this[Et].observe(this._el||this)}var Gt=Dn;var ve=Symbol();function Un(t){t.attr({name:"intersection-once-class",type:k,value:""}).attr({name:"intersection-class",type:k,value:""}).attr({name:"intersection-ratio",type:v,value:0,posUpdate:Vn})}var Ce=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.add(n)),Fn=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.remove(n)),Le=(t,e)=>{e.preventDefault();let n=()=>{t.removeEventListener("render",n),t[x](e.type,e.detail,e.composed)};t.addEventListener("render",n)};function Vn(){let t=this[$];if(this[ve])return Gt.call(this,t.intersectionRatio);this[ve]=!0;let e=this.classList;this.addEventListener("intersection.enter",n=>{Ce(e,t.intersectionOnceClass),Ce(e,t.intersectionClass),this.rendered||Le(this,n)}),this.addEventListener("intersection.exit",n=>{Fn(e,t.intersectionClass),this.rendered||Le(this,n)}),Gt.call(this,t.intersectionRatio)}var _e=Un;var zt=new Map,kn=/function\s+([\p{L}\p{Nl}$_][\p{L}\p{Nl}$_\p{Mn}\p{Mc}\p{Nd}\p{Pc}]*)\s*\(/gmu,Hn=async function(){}.constructor;function $t(t,e,n=!1){let r=`${t.join(",")} ${e}`;if(zt.has(r))return zt.get(r);let i=new(n?Hn:Function)(...t,e);return zt.set(r,i),i}function Me(t,e){let n=[...e.matchAll(kn)].map(i=>i[1]);return $t(Object.keys(t),`${e}; return {${n.map(i=>`${i}: typeof ${i} === 'function' ? ${i} : undefined`)}}; `)(...Object.values(t))}var qt=Symbol(),Yt=Symbol(),Ie=(t,e,n)=>Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),Bn=(t,e)=>e===qt?t:xe(t,e);function Wt(t={}){if(!g(t))return t;let e={};function n(r,i,o,a){r in t||(e[r]||(e[r]={}),Ie(t,r,(s=void 0,c=qt)=>{if(N(s)||E(s)){if(c=s||qt,c in e[r])return e[r][c];s=t}let l=s.reduce((d,h)=>{let T=Bn(h,c);return E(T)?d:d===Yt?T:o(d,T)},f(i)?i():i);return l=f(a)?a(l):l,t!==s&&(e[r][c]=l),l===i?0:l}),Ie(t,r+"Before",(s,c)=>t[r](t.slice(0,s),c)))}return n("$min",Yt,(r,i)=>i>r?r:i),n("$max",Yt,(r,i)=>i<r?r:i),n("$count",0,r=>r+1),n("$sum",0,(r,i)=>i+r),n("$avg",()=>({n:0,i:0}),(r,i)=>(r.n++,r.i+=Number(i),r),r=>isNaN(r.i/r.n)?0:r.i/r.n),n("$distinct",()=>new Set,(r,i)=>(r.add(i),r),r=>[...r]),t}var jt="gSVGObject",Gn="http://www.w3.org/2000/svg",zn="svg",Jt="d",Pe="transform",Fe="appendChild",Zt="insertBefore",De="insertAdjacentElement",Ve="attach",ke="innerHTML",Xt=new WeakMap,Kt=new Set,Yn=t=>ye(t)||t.startsWith("_")||["el","gSVG","then"].includes(t),qn=()=>jt+Math.random().toString(32).substring(2),te=t=>g(t)&&!b(t)&&t[Symbol.toStringTag]===jt,Wn=t=>wt(document.createElementNS(Gn,t)),Nt=t=>N(t)?Wn(t):g(t)&&t!==null?te(t)?t:wt(t):t,Jn=t=>({content:ke,source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling",add:Fe,addBefore:Zt})[t]||t,Xn=t=>["append","before","after",Fe,Zt,De].includes(t)?function(...e){let n=[],r=[],i=[];return t===De?(n.push(e[0]),r.push(Nt(e[1]))):t===Zt?(r.push(Nt(e[0])),i.push(e[1]||this.firstChild||null)):r.push(...e.map(Nt)),r.every(o=>o?._el)?(this[t](...n,...r.map(o=>o._el),...i),r.forEach(o=>o._el.dispatchEvent(new Event(Ve))),r.length>1?r:r[0]):null}:null,At=class{constructor(e){this._el=e,this.gSVG=z}get[Symbol.toStringTag](){return jt}get el(){return this._el}attachTo(e){return(g(e)?te(e)?e._el:e:document.querySelector(e)).appendChild(this._el),this._el.dispatchEvent(new Event(Ve)),this}id(e){return e?(this._el.setAttribute("id",e),this):this._el.id||(this._el.id=qn())}ref(){return`#${this.id()}`}url(){return`url(${this.ref()})`}parents(){let e=[],n=this;for(;n=n.parentElement();)e.push(n);return e}top(){return this.parents().pop()||this}},wt=t=>{if(!g(t)||b(t))return null;if(Xt.has(t))return Xt.get(t);let e=new Proxy(new At(t),{get(n,r){if(Yn(r))return n[r];if(!E(n[r]))return(...a)=>(D(e,r,a),n[r].call(e,...a));if([Jt,Pe,"$"+Jt,"$"+Pe].includes(r)){let a="";r[0]==="$"&&(r=r.substring(1));let c=r===Jt?Kn:Zn,l=new Proxy(d=>(D(e,r,[d]),E(d)?t.getAttribute(r):(d?t.setAttribute(r,d):t.removeAttribute(r),e)),{get(d,h){return h in d?Reflect.get(d,h):(...T)=>{if(h===Symbol.toPrimitive){let M=a;return a="",M}return a+=c(e,h,T),t?.setAttribute(r,a),l}}});return l}let i=Jn(r),o=Xn(i)||t[i];return f(o)?(...a)=>{D(e,r,a);let s=o.call(t,...a);return E(s)?e:Be(s)}:He(t,i,e)}});return Xt.set(t,e),e},He=(t,e,n,r)=>{let i=e.replace(/_/g,"-"),o=(...a)=>{if(D(n,r?`${r}.${e}`:e,a),a.length===0){let c=t?.hasAttribute&&t.hasAttribute(i)?t.getAttribute(i):t[i];return Be(c)}let s=a[0];if(W(t,CSSStyleDeclaration))return t[i]=s,n;if(i in t&&!Kt.has(i)){let c=t[i];if(String(c)===String(s))return n;try{t[i]=s}catch{Kt.add(i)}if(g(t[i])&&t[i]===s||t[i]!==c||i===ke)return n;Kt.add(i)}return s!==0&&!s?t?.removeAttribute&&t.removeAttribute(i):t?.setAttribute&&t.setAttribute(i,ge(s)?"":String(a)),n};return new Proxy(o,{get(a,s){let c=t[i][s];return f(c)?(...l)=>(D(n,`${e}.${s}`,l),c.call(t[i],...l)||n):He(t[i],s,n,i)},set(a,s,c){return t[i][s]=c,!0}})},Be=t=>W(t,HTMLCollection)||W(t,NodeList)?[...t].map(e=>wt(e)):W(t,SVGElement)?wt(t):N(t)?t===""||isNaN(t)?t:Number(t):t,Ge=[],D=(t,e,n,r=[])=>{for(let i of Ge)i(z,t,e,n,r)},xt={},Kn=(t,e,n)=>(D(t,`d.${e}`,n,Object.keys(xt).map(r=>`d.${r}`)),xt[e]?xt[e].apply(t,n):`${e}${n.join(",")}`),Zn=(t,e,n)=>(D(t,`transform.${e}`,n),`${e}(${n.join(",")})`);function z(t){return D(null,"",[t]),Nt(E(t)?zn:t)}z.isWrapped=te;var St=t=>e=>f(e)?e(t):Object.assign(t,e),Qt={install:ze,extendConstructor:St(z),extendInstance:St(At.prototype),extendPath:St(xt),beforeEveryCall(t){f(t)&&Ge.push(t)}};Qt.extendSetup=St(Qt);function ze(t){return t(Qt),z}z.install=ze;var rt=z;var ee="animate",Qn="path",Ye="d",qe="transform",jn="rotate",Z="translate",We="inherit",Je="finished",tr=t=>/^(rotate|skewX|skewY)$/.test(t),er=t=>/^(translate|width|height|x|y|cx|cy|r|rx|ry|dx|dy)$/.test(t),nr=(t,e)=>t&&/^(text|tspan)$/.test(t)&&/^([xy])$/.test(e),ne=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");ne=t.matches,t.addEventListener("change",()=>{ne=t.matches})}var rr=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function ir(t,e={duration:200},n=null,r=null){let i=this.gSVG,o=u=>{let m=g(u)?{...u}:{duration:u};return ne&&(m.duration=0),m.fill="none",m},a=u=>{u=_(u)?u:[u];let m=window.getComputedStyle(this._el),y=[],p=new Set;for(let A of u){let S={};for(let F in A){let O=at(F);S[O]=h(A[F],O),!(O in m)||nr(this.tagName(),O)?p.add(O):O===Ye?S.d=`${Qn}("${S.d}")`:O===qe&&(S.transform=l(S.transform))}y.push(S)}return c(p,y),y},s=[],c=(u,m)=>{if(u.size){let y=new KeyframeEffect(null,m).getKeyframes();for(let p of u){let A=i(ee).attributeName(p).dur(tt.duration+"ms").fill("freeze").begin("indefinite");if(m.length===1)A.to(m[0][p]);else{let S=[],F=[];for(let O in y){let gn=y[O];p in m[O]&&(S.push(gn.computedOffset),F.push(m[O][p]))}S[0]!==0&&(S.unshift(0),F.unshift(this[p]()||We)),S[S.length-1]!==1&&(S.push(1),F.push(this[p]()||We)),A.keyTimes(S.join(";")).values(F.join(";"))}s.push(A),A.attachTo(this),A.beginElementAt((tt.delay||0)/1e3)}}},l=u=>{N(u)&&(u=JSON.parse("{"+u.trim().replace(/^(\w+)\s*\(\s*([^)]+)\s*\)\s*$/,(y,p,A)=>`"${p}": [${A.trim().split(/\s*,\s*|\s+/).map(S=>/^[-+]?\d+(?:\.\d+)?$/.test(S)?S:`"${S}"`).join(", ")}]`)+"}"));let m="";for(let y in u)if(y===jn){let p=d(u[y]);p.length>1&&(m+=`${Z}(${h(p[1],Z)},${h(p[2],Z)}) `),m+=`${y}(${h(p[0],y)}) `,p.length>1&&(m+=`${Z}(-${h(p[1],Z)},-${h(p[2],Z)}) `)}else m+=`${y}(${d(u[y]).map(p=>h(p,y)).join(",")}) `;return m},d=u=>_(u)?u:String(u).split(/\s+|,/),h=(u,m)=>N(u)&&/deg|px/.test(u)?u:tr(m)?u+"deg":er(m)?u+"px":u,T=u=>N(u)?u.replace(/(deg)|(px)/g,"").trim():u,M=u=>u.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),_t=u=>{let m=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,y=m.exec(u);return y&&Number(y[1])===Number(y[4])*-1&&Number(y[2])===Number(y[5])*-1?u=u.replace(m,`rotate(${y[3]}, ${y[1]}, ${y[2]})`):u=T(u),u},tt=o(e),I=a(t),Y=this._el.animate(I,tt);return Y.ready.then(()=>f(n)&&n.call(this,Y)),Y.finished.then(()=>{let u=I[I.length-1];for(let p in u){let A=rr(p);A.startsWith("text-")?this._el.style[p]=u[p]:p!=="offset"&&p in u&&this._el.setAttribute(A,A===Ye?M(u[p]):A===qe?_t(u[p]):T(u[p]))}s.forEach(p=>p[Je](!0));let m=this._el.querySelectorAll(ee),y=this._el.querySelectorAll(`${ee}[${Je}]`);m.length===y.length&&m.forEach(p=>p.remove()),f(r)&&r.call(this,Y)}),this}function sr(t){t.extendInstance({animateTo:ir})}var Xe=sr;var bt={},Ke=Symbol(),en=Symbol(),C=Symbol(),Q=Symbol(),Tt=Symbol(),ie=Symbol(),Ze=Symbol(),re="error",or="unknown",Qe='an invalid "g-for" expression',cr="undefined",ar="NaN (Not a Number)",Rt=(t,e)=>new Error(`The expression "${t}" return ${e} value`),je="class",tn="style",ur=(t,e,n)=>{throw new Error(t+` in ${e} `+n)},lr=(t=>e=>t[e]||e)("attributeName attributeType baseFrequency calcMode clipPathUnits diffuseConstant edgeMode gradientTransform gradientUnits kernelMatrix kernelUnitLength lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox xChannelSelector yChannelSelector zoomAndPan".split(" ").reduce((t,e)=>(t[e.toLowerCase()]=e,t),{}));function nn(t){if(!t?.el?.parentNode)return null;let e=document.createComment(" ref ");return t.parentNode().insertBefore(e,t.el),t.remove(),e[ie]=t,e}function rn(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}function fr(t){let e=t[ie];return t.parentNode.insertBefore(e.el,t),t.remove(),e}j({name:"g-content",exec(t,{expr:e,ctx:n,evalExpr:r}){let i={...n,$$:{fromURL:async c=>{let l=await fetch(c);if(l.status===200)return l.text();console.warn(`Failed to load URL: ${c} (${l.status})`)},element:t,currentContent:t.content,...n.$||{}}};i.$=i.$$;let o=r(e,i),a=new CustomEvent("load",{bubbles:!0,detail:t}),s=c=>E(c)?"":c;g(o)&&o.then?o.then(c=>{t.content(s(c)),t.dispatchEvent(a)}):(t.content(s(o)),t.dispatchEvent(a))}});j({name:"g-if",exec(t,{expr:e,ctx:n,evalExpr:r}){if(!r(e,n))return t[C]&&(t[C].forEach(i=>i.remove()),delete t[C]),nn(t)}});j({name:"g-bind",alias:":",arg:!0,exec(t,{expr:e,arg:n,ctx:r,evalExpr:i}){n=lr(n);let o=t._el,a={...r,$$:["d","transform"].includes(n)?t["$"+n]:{}};Object.assign(a.$$,{get element(){return t},get attribute(){return n},currentValue(){return n===je?[...o.classList]:n===tn?[...o.style].reduce((c,l)=>(c[l]=o.style[l],c),{}):t[n]()},dynamic(c,l=200,d=0){return t.animateTo((_(c)?c:[c]).map(h=>g(h)&&"offset"in h?{[n]:h.value,offset:h.offset}:{[n]:h}),{duration:l,delay:d}),Ze},...r.$||{}}),a.$=a.$$;let s=i(e,a);if(E(s))throw Rt(e,cr);if(n===je){let c=h=>t.classList.add(h),l=h=>t.classList.remove(h),d=h=>Object.entries(h).forEach(([T,M])=>M?c(T):l(T));if(_(s)){s.forEach(h=>N(h)?c(h):g(h)?d(h):void 0);return}if(g(s)){d(s);return}s&&c(s);return}if(n===tn){Object.entries(s).forEach(([c,l])=>t.style[c](l));return}s!==Ze&&t[n](s)}});j({name:"g-on",alias:"@",arg:!0,exec(t,{expr:e,arg:n,ctx:r,evalExpr:i,error:o,code:a}){t[Tt]=t[Tt]||{};let s=t[Tt][n]=t[Tt][n]||new Map;s.has(e)&&t.removeEventListener(n,s.get(e));let c=function(l){try{let d=i(e,r,t);f(d)&&d.call(t,l)}catch(d){o(d.message,{directive:"g-on",argument:n,expression:e,toString(){return`g-on:${n}="${e}"`}},a)}};t.addEventListener(n,c),s.set(e,c),n==="init"&&!t[Ke]&&(t[Ke]=!0,t.dispatchEvent(new Event("init")))}});j({name:"g-for",tmpl:!0,exec(t,{expr:e,ctx:n,error:r}){t[C]=t[C]||[];let i=t.gSVG(nn(t)),o=0;return mr(e,n,a=>{if(t[C][o])it(t[C][o],a,r,!1);else{let s=t.gSVG(t.tagName());s[Q]=t[Q].filter(c=>c.name!=="g-for"),[...t.attributes()].forEach(c=>{c.name!=="g-for"&&s.setAttribute(c.name,c.value)}),t.children().forEach(c=>{s.add(c.cloneNode(!0))}),i.before(s),it(s,a,r),s[en]=!0,t[C].push(s)}o++},a=>{for(;t[C].length>a.length;)t[C].pop().remove()}),!0}});function j({name:t,alias:e,arg:n,tmpl:r,exec:i}){let o=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,a=new RegExp(o,"i");bt[t]={name:t,alias:e,arg:n,tmpl:r,exec:i,check:a}}function hr(t){for(let e in bt){let n=bt[e],r=n.check.exec(t);if(r){let i=r[2];return{...n,arg:i}}}}function dr(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>(e.includes(":")?e.split(":")[1].trim():e).trim())}function pr(t,e){return t[Symbol.iterator]?e==="of"?{iterator:[...t],type:q}:{type:re}:me(t)?{iterator:Array(t<0?0:0|t).fill(0).map((n,r)=>r+(e==="of"?0:1)),type:v}:g(t)?e==="in"?{iterator:Object.entries(t).map(n=>n.reverse()),type:w}:{type:re}:{iterator:t,type:or}}function sn(t,e,n=null){let r=Object.keys(e).filter(rn),o=$t(r,`return ( ${t} ); `).apply(n,r.map(a=>e[a]));if(!ct(o))throw Rt(t,ar);return o}function mr(t,e,n,r){let i="__$$i",o="__$$c",a="__$$f",s=t.match(/^\s*([\s\S]+?)[\s*|)}\]](of|in)[\s*|({[]([\s\S]+?)\s*$/);if(!s)throw Rt(t,Qe);let[,c,l,d]=s;l=l.trim(),c=c.trim(),d=d.trim();let h=sn(d,e)||[],{iterator:T,type:M}=pr(h,l);if(M===re)throw Rt(t,Qe);M===w&&!c.startsWith("[")&&(c=`[${c.replace(/(^\()|(\)$)/g,"")}]`);let _t=dr(c),tt=c.startsWith("(")?c:`(${c})`,I=Object.keys(e).filter(rn),Y=` ${i}.forEach(${tt} => { ${o}({${I}${I.length?",":""}${_t.join(",")}}); }); ${a}(${i}); `;return $t([...I,i,o,a],Y)(...I.map(m=>e[m]),T,n,r)}function it(t,e,n,r=!0){if(r&&t[en])return;let i=t.outerHTML();t[Q]=t[Q]||[];let o=t.attributes();for(let s of[...o]){let c=s.name,l=hr(c);l&&(t[Q].push({...l,expr:s.value}),t.removeAttribute(c))}let a=!1;for(let s of t[Q]){a=s.tmpl||a;try{if(s.exec(t,{...s,ctx:e,evalExpr:sn,error:n,code:i}))return}catch(c){n(c.message,{directive:s.name,argument:s.arg,expression:s.expr,toString(){return`${s.name}${s.arg?":"+s.arg:""}="${s.expr}"`}},i)}}if(!a)for(let s of t.childNodes())s.el[ie]?it(fr(s.el),e,n):s.el?.nodeType===1&&it(s,e,n)}function yr(t={},e=ur){it(this,t,e),this.dispatchEvent(new Event("render"))}function gr(){return this.outerHTML().replaceAll("<!-- ref -->","")}function Er(t){t.install(Xe),t.extendInstance({render:yr,source:gr}),t.extendSetup({extendTemplate:{defineDirective:j,getDirective(e){return bt[e]}}})}var on=Er;var cn=t=>Math.round(t*1e4)/1e4;function se(t){return(t-90)*Math.PI/180}function Ot(t,e,n,r){let i=se(r);return{x:cn(t+n*Math.cos(i)),y:cn(e+n*Math.sin(i))}}function vt(t,e,n,r,i=0){i=Math.abs(i)>=360?i%360:i,r=Math.abs(r)>360?r%360:r,r=Math.abs(r)===360?r>0?359.9:-359.9:r;let o=i+r,a=r>0?1:0,s=Math.abs(o-i)<=180?0:1,c=i<0?(360+i)%360:i,l=o<0?(360+o)%360:o,d=Ot(t,e,n,c),h=Ot(t,e,n,l);return`M${d.x},${d.y}A${n},${n},0,${s},${a},${h.x},${h.y}`}function $r(t,e,n,r,i,o=0){let a=vt(t,e,n+r/2,i,o),s=vt(t,e,n-r/2,-i,o+i);return a+"L"+s.substring(1)+"Z"}function Nr(t,e,n,r,i=0){return`${vt(t,e,n,r,i)}L${t},${e}Z`}function xr(t){t.extendConstructor({polar2cartesian:Ot,degrees2radians:se}),t.extendview&&t.extendview({polar2cartesian:Ot,degrees2radians:se}),t.extendPath({arc:vt,barArc:$r,circleSlice:Nr})}var an=xr;var oe="update",mn="load",ue="template",st="svg",le="data",fe="methods",he="config",un="plugin",Ct="Src",ce="src",ln="safe-origin",fn="same-origin",hn=t=>`script[type=${t}],g-script[type=${t}]`,ot=(t,e)=>t.querySelector(e),ae=(t,e)=>t?.getAttribute(e),Sr=(t,e)=>t?.hasAttribute(e),dn=["0px","auto"],Ar=t=>{let e=getComputedStyle(t.el);return dn.includes(e.width)&&dn.includes(e.height)},pn=t=>({get svg(){return t.svg},get data(){return t.data},get config(){return t.config},get methods(){return t.methods},polar2cartesian:t.polar2cartesian,degrees2radians:t.degrees2radians,grapperView:t}),U=class extends R{static install(e){rt.install(e)}#e=null;#r=!1;#i=!1;#t=[];#n=[];#h=Dt(function(e,n){this[x](e,n)},1);#s(e,n,r,i){let o={message:e,scope:n,code:r,toString:()=>`${e}${n?` in ${n}`:""} ${r}`};i.push(o),console.warn(`Grapper view - Error: ${o}`),this.#h.call(this,"error",this.errors)}#d(e){return e.length=0,(n,r="",i="")=>this.#s(n,r,i,this.#t)}async#c(e,n){let r=await fetch(e,n?{}:{mode:fn,credentials:fn});if(r.status!==200)throw new Error(`${r.statusText} (${r.status}): ${r.url}`);return r.text()}async#p(){let e=[...this.querySelectorAll(hn(un))];for(let n of e){let r=ae(n,ce);if(r){let i=new URL(r,document.location.href);try{let o=await import(i.href);o?.default&&rt.install(o.default)}catch(o){this.#s(o.message,un,r,this.#n)}}}}async#a(){let e=this[$];this.#e=null,e.content.innerHTML="";let n=ot(this,ue);if(e.templateSrc||(e.templateSrc=ae(n,ce)),e.templateSrc)try{e.content.innerHTML=await this.#c(e.templateSrc,n?.hasAttribute(ln))}catch(i){this.#s(i.message,st,e.templateSrc,this.#n)}else{let i=n?.content||ot(this,st);i&&e.content.append(i.cloneNode(!0))}let r=ot(e.content,st);return this.#e=r?rt(r):null,!0}async#o(e,n){let r=this[$],i=e+"Src",o=ot(this,hn(e)),a=!0;o&&(r[i]=ae(o,ce),a=Sr(o,ln));let s=r[i]?await this.#c(r[i],a).catch(c=>this.#s(c.message,e,r[i],this.#n)):o?.textContent;if(s)try{r[e]=n(s,!r[i])}catch(c){this.#s(c.message,e,s,this.#n)}}#u(){return this.#o(fe,e=>Me({$:pn(this)},e))}#l(){return this.#o(he,(e,n)=>n?J(e):JSON.parse(e))}#f(){return this.#o(le,(e,n)=>ut(e)||lt(e)?n?J(e):JSON.parse(e):ft(e))}constructor(){super();let e=this[$];this.shadowRoot.innerHTML=` <style> :host { display : inline-block; width : max-content; height : max-content; } </style><span></span>`,e.content=ot(this.shadowRoot,"span")}[P](){return!this.load()}async[G](e){let n=[];for(let r of e){let i=r.target;if(i===this&&!r.attributeName)return this.load();if([st,ue].includes(i.tagName.toLowerCase()))n.push(this.#a());else if(i.tagName==="SCRIPT"){let o={data:this.#f,methods:this.#u,config:this.#l}[i.type.toLowerCase()];o&&n.push(o.bind(this)())}}if(n.length)return await Promise.all(n),this.update()}async load(){return this.#r=!1,this.#n=[],await this.#p(),await Promise.all([this.#a(),this.#l(),this.#u(),this.#f()]),this.#r=!0,this[x](mn),this.update(!0)}async update(e=!1){if(!(this.#i&&!e)&&this.#e){this.rendered=!1,this.#i=!0;let n=this[$],r=n.methods?.data?n.methods.data(Wt(B(n.data))):Wt(B(n.data)),i={...n.methods,..._(r)?{}:r,data:r,$:pn(this)};await this.#e.render(i,this.#d(this.#t)),Ar(this.#e)&&this.#e.width("100%").height("100%"),this.#i=!1,this.rendered=!0}}get[st](){return this.#e}get loaded(){return this.#r}get errors(){return[...this.#n,...this.#t]}get version(){return"1.1.0-beta.next"}};U.prototype.update=Dt(U.prototype.update,1);var yn=gt(U).ext(_e).attr({name:le,type:w,value:[],posUpdate:oe}).attr({name:"value",set(t){this.data={value:t}},get(){return this.data?.value}}).attr({name:he,type:w,value:{},posUpdate:oe}).prop({name:fe,type:w,value:{},posUpdate:oe});[ue+Ct,le+Ct,fe+Ct,he+Ct].forEach(t=>{yn.prop({name:t,type:k,value:"",posUpdate:mn})});yn.tag("grapper-view").alias("g-composer");var wr=t=>{t.extendSetup({extendview(e){f(e)?e(U.prototype):Object.assign(U.prototype,e)}})};rt.install(wr).install(on).install(an);var Lt=class extends R{constructor(){super(),this.shadowRoot.addEventListener("load",e=>{this[x]("load",{...e.detail,data:this.data,config:this.config})}),this.shadowRoot.addEventListener("update",e=>{this[x]("update",{...e.detail,data:this.data,config:this.config})}),this.shadowRoot.addEventListener("render",e=>{this[x]("render",{...e.detail,data:this.data,config:this.config})}),this.#r(),this.#i()}async#e(e){let n=await fetch(e);if(n.status!==200)throw new Error(`${n.statusText} (${n.status}): ${n.url}`);return n.text()}async#r(){let e=this.querySelector("script[type=data],g-script[type=data]"),n=e?.getAttribute("src")||this.getAttribute("data-src"),r=n?await this.#e(n):e?.textContent;r&&(this.data=ut(r)||lt(r)?J(r):ft(r))}async#i(){let e=this.querySelector("script[type=config],g-script[type=config]"),n=e?.getAttribute("src")||this.getAttribute("config-src"),r=n?await this.#e(n):e?.textContent;r&&(this.config=J(r))}get#t(){return this.shadowRoot.querySelector("grapper-view")}set data(e){if(this.#t?.loaded)this.#t.data=e;else{let n=()=>{this.#t.data=e,this.removeEventListener("load",n)};this.addEventListener("load",n)}}get data(){return this.#t.data}set config(e){if(this.#t?.loaded)pt(this.#t.config,e);else{let n=()=>{pt(this.#t.config,e),this.removeEventListener("load",n)};this.addEventListener("load",n)}}get config(){return this.#t.config}get loaded(){return this.#t.loaded}};gt(Lt).attr({name:"value",set(t){this.data={value:t}},get(){return this.data?.value}});function de(t,e){let n=customElements.get(t);return n||(n=class extends Lt{constructor(){super(),this.shadowRoot.innerHTML=` <style> :host { display : inline-block; width : max-content; height : max-content; } grapper-view { width : auto; height : auto; } </style> ${e} `}},customElements.define(t,n)),n}(typeof gobalThis<"u"?globalThis:window).defineComponent=de;})();