/* grapper - 1.1.0-beta.4 [view] */ (()=>{var sn="function",re="undefined",A="object",v="string",q="array",C="number",k="boolean",on="date",cn="symbol";var B=(t,e)=>typeof t===e,W=(t,e)=>t instanceof e,E=t=>B(t,A),N=t=>B(t,v),f=t=>B(t,sn),ie=t=>B(t,C)&&!isNaN(t),st=t=>!Number.isNaN(t),g=t=>B(t,re),se=t=>B(t,cn),oe=t=>B(t,k),I=t=>Array.isArray(t),wt=t=>W(t,Date)&&!isNaN(t),b=t=>t===null,ot=t=>t.replace(/-([a-z0-9])/g,(e,n)=>n.toUpperCase());function un(t){if(N(t))try{return JSON.parse(`{${t.replace(/^\s*{/,"").replace(/}\s*$/,"").split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(e=>!["",";",","].includes(e.trim())).map(e=>e.split(":")).map(e=>`"${e[0].trim()}":${L(e[1].trim(),void 0,!0)}`).join(",")}}`)}catch{try{return L(t)}catch(n){console.error(n);return}}if(E(t))return t}function ce(t){if(N(t))return t.trim().startsWith("[")?(t.match(/\[(.*?)[^\]]]/g)||[]).map(e=>ce(e.substring(1,e.length-1))):t.split(/[,;]/).map(e=>L(e.trim()));if(I(t))return t}function L(t,e,n=!1){if(!N(t))return t;if(t=an(t.trim()),e===q)return ce(t);if(e===A)return un(t);if(g(e)||e===C){if(g(t)||t==="")return;let r=+t;if(st(r)||e===C)return r}if(g(e)||e===k){if(t==="true")return!0;if(t==="false")return!1;if(e===k)return t==="0"?!1:!!t}if(e===on){try{let r=new Date(t);if(st(r.getTime()))return r}catch{}return}if(g(e)||e===v)return n?`"${t}"`:t}function an(t){return t[0]==="'"&&t[t.length-1]==="'"||t[0]==='"'&&t[t.length-1]==='"'?t.substring(1,t.length-1):t}function ue(t){return/^\s*{/.test(t)&&/}\s*$/.test(t)}function ae(t){return/^\s*\[/.test(t)&&/]\s*$/.test(t)}function le(t){let e=[],n=t.split(/(\r\n|\r|\n)/).map(r=>r.trim()).filter(r=>r);return n.length===0?[]:n.length===1?L(n[0]):n.reduce((r,i,o)=>{let c={},s=i.split(/((?:[^;^,"']|"[^"]*"|'[^']*')+)/).filter(u=>!["",";",","].includes(u.trim()));return o===0?(e=[...s.map(u=>L(u))],r):(s.forEach((u,l)=>{c[e[l]]=L(u)}),r.push(c),r)},[])}function bt(t){let e=`return (${t});`,n=new Function(e)();return f(n)?n():n}var fe=new WeakSet,et=!1,Rt=(t,e)=>!E(t)||b(t)||!f(e)?t:function n(r){if(fe.has(r))return r;for(let o in r)E(r[o])&&!b(r[o])&&(r[o]=n(r[o]));let i=new Proxy(r,{get(o,c){let s=Reflect.get(r,c);return f(s)&&wt(o)&&N(c)&&c.substring(0,3)==="set"&&f(e)&&(s=function(...u){let l=Reflect.get(o,c).apply(o,u);return!et&&e(t),l}),wt(o)?s.bind(o):s},set(o,c,s){let u,l=o[c]===s;return E(s)&&!b(s)?u=Reflect.set(o,c,n(s)):u=Reflect.set(o,c,s),!et&&!l&&e(t),u},deleteProperty(o,c){let s=Reflect.deleteProperty(o,c);return!et&&e(t),s}});return fe.add(i),i}(t);Rt.stop=()=>et=!0;Rt.start=()=>et=!1;var ct=Rt;var nt=!1,ut=!0;function ln(t){return t===null?null:t.constructor?new t.constructor:{}}function H(t){if(!E(t))return t;let e=t===null?null:Object.assign(ln(t),t);for(let n in e)E(e[n])&&(e[n]=H(e[n]));return e}function he(t,e){let n=[],r=[];function i(c,s){if(b(c)||b(s))return nt;if(f(c.valueOf)&&f(s.valueOf)&&(c!==c.valueOf()||s!==s.valueOf()))return c.valueOf()===s.valueOf()&&c.constructor===s.constructor;if(n.indexOf(c)>-1&&r.indexOf(s)>-1)return ut;let u=Object.keys(c),l=Object.keys(s);if(u.length!==l.length)return nt;if(u.length>0){n.push(c),r.push(s);let d=u.length;for(;d--;){let h=u[d];if(!o(c[h],s[h]))return nt}}return ut}function o(c,s){if(c===s)return ut;let u=typeof c;return u!==typeof s?nt:u===C&&isNaN(c)&&isNaN(s)?ut:u===A?i(c,s):nt}return o(t,e)}function de(t,e){let n=t,r=N(e)?e.split("."):e;for(let i=0;i<r.length;i++){if(g(n[r[i]]))return;n=n[r[i]]}return n}var x=Symbol(),G=Symbol(),T=Symbol(),Ot=Object.defineProperty;function fn(t,e,n,r=!1){if(!(t.ready===!1||!e))if(r)n?t.setAttribute(e,""):t.removeAttribute(e);else{let i=b(n)||g(n)?"":n.toString();t.hasAttribute(e)&&t.getAttribute(e)!==i&&t.setAttribute(e,i)}}function hn(t){this[x]={};let e=t;do{let n=at.get(e);for(let r in n)if(n.hasOwnProperty(r)&&this.hasOwnProperty(r)){let i=this[r];delete this[r],this[r]=g(i)?H(n[r]):i}else r in this[x]||(this[x][r]=H(n[r]));e=Object.getPrototypeOf(e)}while(e!==HTMLElement)}function dn(){new MutationObserver(t=>{t.some(e=>!e.attributeName)&&this[T]("update"),(g(this.ready)||this.ready)&&f(this[G])&&this[G](t)}).observe(this,{attributes:!0,childList:!0,subtree:!0,characterData:!0})}var at=new WeakMap,J=class extends HTMLElement{constructor(){super(),hn.call(this,new.target),f(this[G])&&dn.call(this)}[T](e,n={},r=!1){return this.dispatchEvent(new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n,composed:r}))}};function pn(t,e){e.propertyName||(e.propertyName=ot(e.name)),me(t,{...e,name:e.propertyName,attribute:e.name});let n=Object.getPrototypeOf(t),r="observedAttributes",i=Object.getOwnPropertyDescriptor(t,r),o=Object.getOwnPropertyDescriptor(n,r),c=i?i.get:void 0;Ot(t,r,yn(t,e,n,c,i,o));let s="attributeChangedCallback",u=Object.getOwnPropertyDescriptor(t.prototype,s),l=Object.getOwnPropertyDescriptor(n.prototype,s),d=u?u.value:void 0;Ot(t.prototype,s,mn(e,d,l))}function mn(t,e,n){return{value:function(r,i,o){if(t.name===r){let c=t.propertyName;this[c]!==o&&(t.type===k?this[c]=this.hasAttribute(t.name):this[c]=L(o,t.type))}else e&&e.apply(this,arguments);n?.value&&n.value.apply(this,arguments)},enumerable:!1,writable:!0,configurable:!0}}function yn(t,e,n,r,i,o){let c={enumerable:!1,configurable:!0};return i?o?c.get=function(){return[e.name,...r.call(t),...o.get.call(n)]}:c.get=function(){return[e.name,...r.call(t)]}:c.get=o?function(){return[e.name,...o.get.call(n)]}:function(){return[e.name]},c}function me(t,e){Ot(t.prototype,e.name,{set:ye(e),get:gn(e),configurable:!0,enumerable:!1}),at.has(t)||at.set(t,{}),at.get(t)[e.name]=e.value}function En(t,e){b(t.posUpdateEvent)||(t.posUpdateEvent?this[T](t.posUpdateEvent,{[t.name]:e}):this[T]("update",{[t.name]:e})),f(t.posUpdate)?t.posUpdate.call(this,e):f(this[t.posUpdate])&&this[t.posUpdate]()}function ye(t){return function(e){let n=this[x];f(t.preUpdate)&&!t.preUpdate.call(this,e)||(t.schema&&(ct.stop(),e=t.schema.normalize(e),ct.start()),!(!E(e)&&he(n[t.name],e))&&(f(t.set)?t.set.call(this,e):n[t.name]=N(e)&&t.type?L(e,t.type):e,t.attribute&&![q,A].includes(t.type)&&fn(this,t.attribute,e,t.type===k),En.call(this,t,e)))}}function gn(t){return function(){if(f(t.get))return t.get.call(this);{let e=this[x];switch(t.type){case C:return g(e[t.name])?void 0:Number(e[t.name]);case k:return!!e[t.name];case A:case q:return ct(e[t.name]||(t.type===A?{}:[]),n=>ye(t).call(this,n));default:return e[t.name]}}}}function pe(t,e){e=e.toLowerCase(),customElements.get(e)||customElements.define(e,t)}function Ee(t,e={}){return e.prop=(...n)=>(n.forEach(r=>me(t,{...r})),e),e.attr=(...n)=>(n.forEach(r=>pn(t,{...r})),e),e.tag=n=>(pe(t,n),e),e.alias=n=>(pe(class extends t{},n),e),e.extension=e.ext=n=>(n.call(e,e,t),e),e}J.CHANGE=G;J.FIRE_EVENT=T;function Ct(t,e){let n=new WeakMap;return function(...r){clearTimeout(n.get(this)),n.set(this,setTimeout(()=>{t.apply(this,r)},e))}}function vt(t,e){let n=new WeakMap,r=[];return function(...i){return clearTimeout(n.get(this)),new Promise((o,c)=>{r.push({resolve:o,reject:c}),n.set(this,setTimeout(()=>{try{let s=t.apply(this,i);r.forEach(u=>u.resolve(s))}catch(s){r.forEach(u=>u.reject(s))}finally{r.length=0}},e))})}}function Mt(t,e){return function(...n){if(t.apply(this,n))return e.apply(this,n)}}function _t(t,e){return function(...n){let r=t.apply(this,n);return f(r.then)?r.then(i=>e.call(this,i)||i):e.call(this,r)||r}}var ge=1,It=Symbol(),Pt=Symbol(),X=Symbol(),R=Symbol(),xe=Symbol(),Lt=Symbol(),Ne=(t,e)=>t[e]?.forEach(n=>f(n)&&n.apply(t)),M=class extends J{constructor(e){super(),this.attachShadow({mode:"open"}),this[x].ready=e||!1,this[x].rendered=!1,g(e)&&(this.ready=!0)}get ready(){return this[x].ready}set ready(e){let n=this[x],r=n.ready;n.ready=!!e,r===!1&&n.ready===!0&&(this[T]("ready",{ready:!0}),f(this[R])&&this[R]())}get rendered(){return this[x].rendered}set rendered(e){let n=this[x],r=n.rendered;n.rendered=!!e,r===!1&&n.rendered===!0&&this[T]("render",{rendered:!0})}connectedCallback(){let e=this.getBoundingClientRect(),n=getComputedStyle(this).flexDirection,r=()=>{let{width:i,height:o}=this.getBoundingClientRect(),c=getComputedStyle(this).flexDirection;(i!==e.width||o!==e.height||c!==n)&&(f(this[xe])&&this[xe](i,o,i-e.width,o-e.height),e={width:i,height:o},n=c,this[T]("resize",e)),this[x]._resizeObserver=window.requestAnimationFrame(r)};r(),Ne(this,It)}disconnectedCallback(){window.cancelAnimationFrame(this[x]._resizeObserver),Ne(this,Pt)}};M.prototype[It]=[];M.prototype[Pt]=[];function xn(t,e){let n={name:e.name.startsWith("--")?e.name:`--${e.name}`,initialValue:e.initialValue??e.value??"",syntax:e.syntax??"*",inherits:e.inherits??!0};t.prototype[Lt]||(t.prototype[Lt]={}),t.prototype[Lt][n.name]=n}function Nn(t){if(f(t.prototype[R])){let e=t.prototype[R];t.prototype[R]=Mt(function(){return this.rendered=!1,this.ready},vt(_t(async function(){return e.apply(this)},function(n){this.rendered=n!==!1,this.rendered&&f(this[X])&&this[X]()}),ge))}if(f(t.prototype[X])){let e=t.prototype[X];t.prototype[X]=Mt(function(n){return n&&(this[x].rendered=!0),this.ready&&this[x].rendered},vt(_t(async function(...n){return e.apply(this,n)},function(){this[T]("refresh")}),ge))}}function $e(t){Nn(t);let e=Ee(t,{style:(...n)=>(n.forEach(r=>xn(t,{...r})),e)});return e}M.RENDER=R;M.REFRESH=X;M.ONCONNECT=It;M.ONDISCONNECT=Pt;var $n="intersection.enter",Sn="intersection.exit",ft=Symbol();function An(t){let e=r=>this.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,composed:!0})),n=!1;this[ft]&&this[ft].disconnect(),this[ft]=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&i.intersectionRatio>=t?n||(n=!0,e($n)):(n=!1,e(Sn))})},{root:null,rootMargin:"0px",threshold:Array(21).fill(0).map((r,i)=>i*.05)}),this[ft].observe(this._el||this)}var Ut=An;var Se=Symbol();function Tn(t){t.attr({name:"intersection-once-class",type:v,value:""}).attr({name:"intersection-class",type:v,value:""}).attr({name:"intersection-ratio",type:C,value:0,posUpdate:bn})}var Ae=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.add(n)),wn=(t,e)=>e&&e.split(/\s+/).forEach(n=>t.remove(n)),Te=(t,e)=>{e.preventDefault();let n=()=>{t.removeEventListener("render",n),t[T](e.type,e.detail,e.composed)};t.addEventListener("render",n)};function bn(){let t=this[x];if(this[Se])return Ut.call(this,t.intersectionRatio);this[Se]=!0;let e=this.classList;this.addEventListener("intersection.enter",n=>{Ae(e,t.intersectionOnceClass),Ae(e,t.intersectionClass),this.rendered||Te(this,n)}),this.addEventListener("intersection.exit",n=>{wn(e,t.intersectionClass),this.rendered||Te(this,n)}),Ut.call(this,t.intersectionRatio)}var we=Tn;var Dt=new Map,Rn=/function\s+([\p{L}\p{Nl}$_][\p{L}\p{Nl}$_\p{Mn}\p{Mc}\p{Nd}\p{Pc}]*)\s*\(/gmu,On=async function(){}.constructor;function ht(t,e,n=!1){let r=`${t.join(",")} ${e}`;if(Dt.has(r))return Dt.get(r);let i=new(n?On:Function)(...t,e);return Dt.set(r,i),i}function be(t,e){let n=[...e.matchAll(Rn)].map(i=>i[1]);return ht(Object.keys(t),`${e}; return {${n.map(i=>`${i}: typeof ${i} === 'function' ? ${i} : undefined`)}}; `)(...Object.values(t))}var Vt=Symbol(),Ft=Symbol(),Re=(t,e,n)=>Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n}),Cn=(t,e)=>e===Vt?t:de(t,e);function kt(t={}){if(!E(t))return t;let e={};function n(r,i,o,c){r in t||(e[r]||(e[r]={}),Re(t,r,(s=void 0,u=Vt)=>{if(N(s)||g(s)){if(u=s||Vt,u in e[r])return e[r][u];s=t}let l=s.reduce((d,h)=>{let w=Cn(h,u);return g(w)?d:d===Ft?w:o(d,w)},f(i)?i():i);return l=f(c)?c(l):l,t!==s&&(e[r][u]=l),l===i?0:l}),Re(t,r+"Before",(s,u)=>t[r](t.slice(0,s),u)))}return n("$min",Ft,(r,i)=>i>r?r:i),n("$max",Ft,(r,i)=>i<r?r:i),n("$count",0,r=>r+1),n("$sum",0,(r,i)=>i+r),n("$avg",()=>({n:0,i:0}),(r,i)=>(r.n++,r.i+=Number(i),r),r=>isNaN(r.i/r.n)?0:r.i/r.n),n("$distinct",()=>new Set,(r,i)=>(r.add(i),r),r=>[...r]),t}var qt="gSVGObject",vn="http://www.w3.org/2000/svg",Mn="svg",Bt="d",Oe="transform",Me="appendChild",zt="insertBefore",Ce="insertAdjacentElement",_e="attach",Le="innerHTML",Ht=new WeakMap,Gt=new Set,_n=t=>se(t)||t.startsWith("_")||["el","gSVG","then"].includes(t),Ln=()=>qt+Math.random().toString(32).substring(2),Wt=t=>E(t)&&!b(t)&&t[Symbol.toStringTag]===qt,In=t=>Et(document.createElementNS(vn,t)),dt=t=>N(t)?In(t):E(t)&&t!==null?Wt(t)?t:Et(t):t,Pn=t=>({content:Le,source:"outerHTML",parent:"parentElement",next:"nextElementSibling",previous:"previousElementSibling",add:Me,addBefore:zt})[t]||t,Un=t=>["append","before","after",Me,zt,Ce].includes(t)?function(...e){let n=[],r=[],i=[];return t===Ce?(n.push(e[0]),r.push(dt(e[1]))):t===zt?(r.push(dt(e[0])),i.push(e[1]||this.firstChild||null)):r.push(...e.map(dt)),r.every(o=>o?._el)?(this[t](...n,...r.map(o=>o._el),...i),r.forEach(o=>o._el.dispatchEvent(new Event(_e))),r.length>1?r:r[0]):null}:null,yt=class{constructor(e){this._el=e,this.gSVG=z}get[Symbol.toStringTag](){return qt}get el(){return this._el}attachTo(e){return(E(e)?Wt(e)?e._el:e:document.querySelector(e)).appendChild(this._el),this._el.dispatchEvent(new Event(_e)),this}id(e){return e?(this._el.setAttribute("id",e),this):this._el.id||(this._el.id=Ln())}ref(){return`#${this.id()}`}url(){return`url(${this.ref()})`}parents(){let e=[],n=this;for(;n=n.parentElement();)e.push(n);return e}top(){return this.parents().pop()||this}},Et=t=>{if(!E(t)||b(t))return null;if(Ht.has(t))return Ht.get(t);let e=new Proxy(new yt(t),{get(n,r){if(_n(r))return n[r];if(!g(n[r]))return(...c)=>(D(e,r,c),n[r].call(e,...c));if([Bt,Oe,"$"+Bt,"$"+Oe].includes(r)){let c="";r[0]==="$"&&(r=r.substring(1));let u=r===Bt?Dn:Fn,l=new Proxy(d=>(D(e,r,[d]),g(d)?t.getAttribute(r):(d?t.setAttribute(r,d):t.removeAttribute(r),e)),{get(d,h){return h in d?Reflect.get(d,h):(...w)=>{if(h===Symbol.toPrimitive){let P=c;return c="",P}return c+=u(e,h,w),t?.setAttribute(r,c),l}}});return l}let i=Pn(r),o=Un(i)||t[i];return f(o)?(...c)=>{D(e,r,c);let s=o.call(t,...c);return g(s)?e:Pe(s)}:Ie(t,i,e)}});return Ht.set(t,e),e},Ie=(t,e,n,r)=>{let i=e.replace(/_/g,"-"),o=(...c)=>{if(D(n,r?`${r}.${e}`:e,c),c.length===0){let u=t?.hasAttribute&&t.hasAttribute(i)?t.getAttribute(i):t[i];return Pe(u)}let s=c[0];if(W(t,CSSStyleDeclaration))return t[i]=s,n;if(i in t&&!Gt.has(i)){let u=t[i];if(String(u)===String(s))return n;try{t[i]=s}catch{Gt.add(i)}if(E(t[i])&&t[i]===s||t[i]!==u||i===Le)return n;Gt.add(i)}return s!==0&&!s?t?.removeAttribute&&t.removeAttribute(i):t?.setAttribute&&t.setAttribute(i,oe(s)?"":String(c)),n};return new Proxy(o,{get(c,s){let u=t[i][s];return f(u)?(...l)=>(D(n,`${e}.${s}`,l),u.call(t[i],...l)||n):Ie(t[i],s,n,i)},set(c,s,u){return t[i][s]=u,!0}})},Pe=t=>W(t,HTMLCollection)||W(t,NodeList)?[...t].map(e=>Et(e)):W(t,SVGElement)?Et(t):N(t)?t===""||isNaN(t)?t:Number(t):t,Ue=[],D=(t,e,n,r=[])=>{for(let i of Ue)i(z,t,e,n,r)},pt={},Dn=(t,e,n)=>(D(t,`d.${e}`,n,Object.keys(pt).map(r=>`d.${r}`)),pt[e]?pt[e].apply(t,n):`${e}${n.join(",")}`),Fn=(t,e,n)=>(D(t,`transform.${e}`,n),`${e}(${n.join(",")})`);function z(t){return D(null,"",[t]),dt(g(t)?Mn:t)}z.isWrapped=Wt;var mt=t=>e=>f(e)?e(t):Object.assign(t,e),Yt={install:De,extendConstructor:mt(z),extendInstance:mt(yt.prototype),extendPath:mt(pt),beforeEveryCall(t){f(t)&&Ue.push(t)}};Yt.extendSetup=mt(Yt);function De(t){return t(Yt),z}z.install=De;var rt=z;var Jt="animate",Vn="path",Fe="d",Ve="transform",kn="rotate",K="translate",ke="inherit",Be="finished",Bn=t=>/^(rotate|skewX|skewY)$/.test(t),Hn=t=>/^(translate|width|height|x|y|cx|cy|r|rx|ry|dx|dy)$/.test(t),Gn=(t,e)=>t&&/^(text|tspan)$/.test(t)&&/^([xy])$/.test(e),Xt=!1;if(window.matchMedia){let t=window.matchMedia("(prefers-reduced-motion: reduce)");Xt=t.matches,t.addEventListener("change",()=>{Xt=t.matches})}var zn=t=>t.replace(/([A-Z])/g,"-$1").toLowerCase();function Yn(t,e={duration:200},n=null,r=null){let i=this.gSVG,o=a=>{let m=E(a)?{...a}:{duration:a};return Xt&&(m.duration=0),m.fill="none",m},c=a=>{a=I(a)?a:[a];let m=window.getComputedStyle(this._el),y=[],p=new Set;for(let S of a){let $={};for(let V in S){let O=ot(V);$[O]=h(S[V],O),!(O in m)||Gn(this.tagName(),O)?p.add(O):O===Fe?$.d=`${Vn}("${$.d}")`:O===Ve&&($.transform=l($.transform))}y.push($)}return u(p,y),y},s=[],u=(a,m)=>{if(a.size){let y=new KeyframeEffect(null,m).getKeyframes();for(let p of a){let S=i(Jt).attributeName(p).dur(tt.duration+"ms").fill("freeze").begin("indefinite");if(m.length===1)S.to(m[0][p]);else{let $=[],V=[];for(let O in y){let rn=y[O];p in m[O]&&($.push(rn.computedOffset),V.push(m[O][p]))}$[0]!==0&&($.unshift(0),V.unshift(this[p]()||ke)),$[$.length-1]!==1&&($.push(1),V.push(this[p]()||ke)),S.keyTimes($.join(";")).values(V.join(";"))}s.push(S),S.attachTo(this),S.beginElementAt((tt.delay||0)/1e3)}}},l=a=>{N(a)&&(a=JSON.parse("{"+a.trim().replace(/^(\w+)\s*\(\s*([^)]+)\s*\)\s*$/,(y,p,S)=>`"${p}": [${S.trim().split(/\s*,\s*|\s+/).map($=>/^[-+]?\d+(?:\.\d+)?$/.test($)?$:`"${$}"`).join(", ")}]`)+"}"));let m="";for(let y in a)if(y===kn){let p=d(a[y]);p.length>1&&(m+=`${K}(${h(p[1],K)},${h(p[2],K)}) `),m+=`${y}(${h(p[0],y)}) `,p.length>1&&(m+=`${K}(-${h(p[1],K)},-${h(p[2],K)}) `)}else m+=`${y}(${d(a[y]).map(p=>h(p,y)).join(",")}) `;return m},d=a=>I(a)?a:String(a).split(/\s+|,/),h=(a,m)=>N(a)&&/deg|px/.test(a)?a:Bn(m)?a+"deg":Hn(m)?a+"px":a,w=a=>N(a)?a.replace(/(deg)|(px)/g,"").trim():a,P=a=>a.replace(/(path\s*\(\s*["'])|(["']\s*\)\s*$)/g,"").trim().replace(/([a-zA-Z])\s*/g,"$1").replace(/\s+/g,","),Tt=a=>{let m=/translate\((.*)px,(.*)px\) rotate\((.*)deg\) translate\((.*)px,(.*)px\)\s+/,y=m.exec(a);return y&&Number(y[1])===Number(y[4])*-1&&Number(y[2])===Number(y[5])*-1?a=a.replace(m,`rotate(${y[3]}, ${y[1]}, ${y[2]})`):a=w(a),a},tt=o(e),U=c(t),Y=this._el.animate(U,tt);return Y.ready.then(()=>f(n)&&n.call(this,Y)),Y.finished.then(()=>{let a=U[U.length-1];for(let p in a){let S=zn(p);S.startsWith("text-")?this._el.style[p]=a[p]:p!=="offset"&&p in a&&this._el.setAttribute(S,S===Fe?P(a[p]):S===Ve?Tt(a[p]):w(a[p]))}s.forEach(p=>p[Be](!0));let m=this._el.querySelectorAll(Jt),y=this._el.querySelectorAll(`${Jt}[${Be}]`);m.length===y.length&&m.forEach(p=>p.remove()),f(r)&&r.call(this,Y)}),this}function qn(t){t.extendInstance({animateTo:Yn})}var He=qn;var xt={},Ge=Symbol(),Je=Symbol(),_=Symbol(),Z=Symbol(),gt=Symbol(),Zt=Symbol(),ze=Symbol(),Kt="error",Wn="unknown",Ye='an invalid "g-for" expression',Jn="undefined",Xn="NaN (Not a Number)",Nt=(t,e)=>new Error(`The expression "${t}" return ${e} value`),qe="class",We="style",Kn=(t,e,n)=>{throw new Error(t+` in ${e} `+n)},Zn=(t=>e=>t[e]||e)("attributeName attributeType baseFrequency calcMode clipPathUnits diffuseConstant edgeMode gradientTransform gradientUnits kernelMatrix kernelUnitLength lengthAdjust limitingConeAngle markerHeight markerUnits markerWidth maskContentUnits maskUnits numOctaves pathLength patternContentUnits patternTransform patternUnits pointsAtX pointsAtY pointsAtZ preserveAlpha preserveAspectRatio primitiveUnits refX refY requiredExtensions requiredFeatures specularConstant specularExponent spreadMethod startOffset stdDeviation stitchTiles surfaceScale systemLanguage tableValues targetX targetY textLength viewBox xChannelSelector yChannelSelector zoomAndPan".split(" ").reduce((t,e)=>(t[e.toLowerCase()]=e,t),{}));function Xe(t){if(!t?.el?.parentNode)return null;let e=document.createComment(" ref ");return t.parentNode().insertBefore(e,t.el),t.remove(),e[Zt]=t,e}function Ke(t){try{return new Function(`let ${t} = 0`),!0}catch{return!1}}function Qn(t){let e=t[Zt];return t.parentNode.insertBefore(e.el,t),t.remove(),e}Q({name:"g-content",exec(t,{expr:e,data:n,evalExpr:r}){let i={...n,$$:{fromURL:async u=>{let l=await fetch(u);if(l.status===200)return l.text();console.warn(`Failed to load URL: ${u} (${l.status})`)},element:t,currentContent:t.content}},o=r(e,i),c=new CustomEvent("load",{bubbles:!0,detail:t}),s=u=>g(u)?"":u;E(o)&&o.then?o.then(u=>{t.content(s(u)),t.dispatchEvent(c)}):(t.content(s(o)),t.dispatchEvent(c))}});Q({name:"g-if",exec(t,{expr:e,data:n,evalExpr:r}){if(!r(e,n))return t[_]&&(t[_].forEach(i=>i.remove()),delete t[_]),Xe(t)}});Q({name:"g-bind",alias:":",arg:!0,exec(t,{expr:e,arg:n,data:r,evalExpr:i}){n=Zn(n);let o=t._el,c={...r,$$:["d","transform"].includes(n)?t["$"+n]:{}};Object.assign(c.$$,{get element(){return t},get attribute(){return n},currentValue(){return n===qe?[...o.classList]:n===We?[...o.style].reduce((u,l)=>(u[l]=o.style[l],u),{}):t[n]()},dynamic(u,l=200,d=0){return t.animateTo((I(u)?u:[u]).map(h=>E(h)&&"offset"in h?{[n]:h.value,offset:h.offset}:{[n]:h}),{duration:l,delay:d}),ze}});let s=i(e,c);if(g(s))throw Nt(e,Jn);if(n===qe){let u=h=>t.classList.add(h),l=h=>t.classList.remove(h),d=h=>Object.entries(h).forEach(([w,P])=>P?u(w):l(w));if(I(s)){s.forEach(h=>N(h)?u(h):E(h)?d(h):void 0);return}if(E(s)){d(s);return}s&&u(s);return}if(n===We){Object.entries(s).forEach(([u,l])=>t.style[u](l));return}s!==ze&&t[n](s)}});Q({name:"g-on",alias:"@",arg:!0,exec(t,{expr:e,arg:n,data:r,evalExpr:i,error:o,code:c}){t[gt]=t[gt]||{};let s=t[gt][n]=t[gt][n]||new Map;s.has(e)&&t.removeEventListener(n,s.get(e));let u=function(l){try{let d=i(e,r,t);f(d)&&d.call(t,l)}catch(d){o(d.message,{directive:"g-on",argument:n,expression:e,toString(){return`g-on:${n}="${e}"`}},c)}};t.addEventListener(n,u),s.set(e,u),n==="init"&&!t[Ge]&&(t[Ge]=!0,t.dispatchEvent(new Event("init")))}});Q({name:"g-for",tmpl:!0,exec(t,{expr:e,data:n,error:r}){t[_]=t[_]||[];let i=t.gSVG(Xe(t)),o=0;return nr(e,n,c=>{if(t[_][o])it(t[_][o],c,r,!1);else{let s=t.gSVG(t.tagName());s[Z]=t[Z].filter(u=>u.name!=="g-for"),[...t.attributes()].forEach(u=>{u.name!=="g-for"&&s.setAttribute(u.name,u.value)}),t.children().forEach(u=>{s.add(u.cloneNode(!0))}),i.before(s),it(s,c,r),s[Je]=!0,t[_].push(s)}o++},c=>{for(;t[_].length>c.length;)t[_].pop().remove()}),!0}});function Q({name:t,alias:e,arg:n,tmpl:r,exec:i}){let o=`^(${t}${n?":":""}${e?`|${e})`:")"}${n?"(.*)$":"$"}`,c=new RegExp(o,"i");xt[t]={name:t,alias:e,arg:n,tmpl:r,exec:i,check:c}}function jn(t){for(let e in xt){let n=xt[e],r=n.check.exec(t);if(r){let i=r[2];return{...n,arg:i}}}}function tr(t){return t.replace(/[{}()[\]]/g,"").split(",").map(e=>(e.includes(":")?e.split(":")[1].trim():e).trim())}function er(t,e){return t[Symbol.iterator]?e==="of"?{iterator:[...t],type:q}:{type:Kt}:ie(t)?{iterator:Array(t<0?0:0|t).fill(0).map((n,r)=>r+(e==="of"?0:1)),type:C}:E(t)?e==="in"?{iterator:Object.entries(t).map(n=>n.reverse()),type:A}:{type:Kt}:{iterator:t,type:Wn}}function Ze(t,e,n=null){let r=Object.keys(e).filter(Ke),o=ht(r,`return ( ${t} ); `).apply(n,r.map(c=>e[c]));if(!st(o))throw Nt(t,Xn);return o}function nr(t,e,n,r){let i="__$$i",o="__$$c",c="__$$f",s=t.match(/^\s*([\s\S]+?)[\s*|)}\]](of|in)[\s*|({[]([\s\S]+?)\s*$/);if(!s)throw Nt(t,Ye);let[,u,l,d]=s;l=l.trim(),u=u.trim(),d=d.trim();let h=Ze(d,e)||[],{iterator:w,type:P}=er(h,l);if(P===Kt)throw Nt(t,Ye);P===A&&!u.startsWith("[")&&(u=`[${u.replace(/(^\()|(\)$)/g,"")}]`);let Tt=tr(u),tt=u.startsWith("(")?u:`(${u})`,U=Object.keys(e).filter(Ke),Y=` ${i}.forEach(${tt} => { ${o}({${U}${U.length?",":""}${Tt.join(",")}}); }); ${c}(${i}); `;return ht([...U,i,o,c],Y)(...U.map(m=>e[m]),w,n,r)}function it(t,e,n,r=!0){if(r&&t[Je])return;let i=t.outerHTML();t[Z]=t[Z]||[];let o=t.attributes();for(let s of[...o]){let u=s.name,l=jn(u);l&&(t[Z].push({...l,expr:s.value}),t.removeAttribute(u))}let c=!1;for(let s of t[Z]){c=s.tmpl||c;try{if(s.exec(t,{...s,data:e,evalExpr:Ze,error:n,code:i}))return}catch(u){n(u.message,{directive:s.name,argument:s.arg,expression:s.expr,toString(){return`${s.name}${s.arg?":"+s.arg:""}="${s.expr}"`}},i)}}if(!c)for(let s of t.childNodes())s.el[Zt]?it(Qn(s.el),e,n):s.el?.nodeType===1&&it(s,e,n)}function rr(t={},e=Kn){it(this,t,e),this.dispatchEvent(new Event("render"))}function ir(){return this.outerHTML().replaceAll("<!-- ref -->","")}function sr(t){t.install(He),t.extendInstance({render:rr,source:ir}),t.extendSetup({extendTemplate:{defineDirective:Q,getDirective(e){return xt[e]}}})}var Qe=sr;var je=t=>Math.round(t*1e4)/1e4;function Qt(t){return(t-90)*Math.PI/180}function $t(t,e,n,r){let i=Qt(r);return{x:je(t+n*Math.cos(i)),y:je(e+n*Math.sin(i))}}function St(t,e,n,r,i=0){i=Math.abs(i)>=360?i%360:i,r=Math.abs(r)>360?r%360:r,r=Math.abs(r)===360?r>0?359.9:-359.9:r;let o=i+r,c=r>0?1:0,s=Math.abs(o-i)<=180?0:1,u=i<0?(360+i)%360:i,l=o<0?(360+o)%360:o,d=$t(t,e,n,u),h=$t(t,e,n,l);return`M${d.x},${d.y}A${n},${n},0,${s},${c},${h.x},${h.y}`}function or(t,e,n,r,i,o=0){let c=St(t,e,n+r/2,i,o),s=St(t,e,n-r/2,-i,o+i);return c+"L"+s.substring(1)+"Z"}function cr(t,e,n,r,i=0){return`${St(t,e,n,r,i)}L${t},${e}Z`}function ur(t){t.extendConstructor({polar2cartesian:$t,degrees2radians:Qt}),t.extendview&&t.extendview({polar2cartesian:$t,degrees2radians:Qt}),t.extendPath({arc:St,barArc:or,circleSlice:cr})}var tn=ur;var jt="update",j="svg",te="methods",ee="config",ne="data",At="-src",en=t=>`script[type=${t}],g-script[type=${t}]`,nn=["0px","auto"],ar=t=>{let e=getComputedStyle(t.el);return nn.includes(e.width)&&nn.includes(e.height)},F=class extends M{static install(e){rt.install(e)}#t=null;#r=!1;#i=!1;#s=[];#e=[];#h=Ct(function(e,n){this[T](e,n)},1);#n(e,n,r,i){let o={message:e,scope:n,code:r,toString:()=>`${e}${n?` in ${n}`:""} ${r}`};i.push(o),console.warn(`Grapper view - Error: ${o}`),this.#h.call(this,"error",this.errors)}#d(e){return e.length=0,(n,r="",i="")=>this.#n(n,r,i,this.#s)}async#c(e){let n=await fetch(e);if(n.status!==200)throw new Error(`${n.statusText} (${n.status}): ${n.url}`);return n.text()}async#p(){let e=[...this.querySelectorAll(en("plugin"))];for(let n of e){let r=n.getAttribute("src");if(r){let i=new URL(r,document.location.href);try{let o=await import(i.href);o?.default&&rt.install(o.default)}catch(o){this.#n(o.message,"plugin",r,this.#e)}}}}async#u(){let e=this[x];if(this.#t=null,e.content.innerHTML="",e.svgSrc)try{e.content.innerHTML=await this.#c(e.svgSrc)}catch(r){this.#n(r.message,j,e.svgSrc,this.#e)}else{let r=this.querySelector("template")?.content||this.querySelector(j);r&&e.content.append(r.cloneNode(!0))}let n=e.content.querySelector(j);return this.#t=n?rt(n):null,!0}async#o(e,n){let r=this[x],i=e+"Src",o=this.querySelector(en(e));o&&(r[i]=o.getAttribute("src"));let c=r[i]?await this.#c(r[i]).catch(s=>this.#n(s.message,e,r[i],this.#e)):o?.textContent;if(c)try{r[e]=n(c)}catch(s){this.#n(s.message,e,c,this.#e)}}#a(){return this.#o(te,e=>be({$:this},e))}#l(){return this.#o(ee,bt)}#f(){return this.#o(ne,e=>ue(e)||ae(e)?bt(e):le(e))}constructor(){super();let e=this[x];this.shadowRoot.innerHTML=` <style> :host { display : inline-block; width : max-content; height : max-content; } </style><span></span>`,e.content=this.shadowRoot.querySelector("span")}[R](){return!this.load()}async[G](e){let n=[];for(let r of e){let i=r.target;if(i===this&&!r.attributeName)return this.load();if(i.tagName.toLowerCase()===j)n.push(this.#u());else if(i.tagName==="SCRIPT"){let o={data:this.#f,methods:this.#a,config:this.#l}[i.type.toLowerCase()];o&&n.push(o())}}if(n.length)return await Promise.all(n),this.update()}async load(){return this.#r=!1,this.#e=[],await this.#p(),await Promise.all([this.#u(),this.#l(),this.#a(),this.#f()]),this.#r=!0,this[T]("load"),this.update(!0)}async update(e=!1){if(!(this.#i&&!e)&&this.#t){this.rendered=!1,this.#i=!0;let n=this[x],r=n.methods?.data?n.methods.data(kt(H(n.data))):kt(H(n.data)),i={...n.methods,...I(r)?{}:r,data:r,$:this};await this.#t.render(i,this.#d(this.#s)),ar(this.#t)&&this.#t.width("100%").height("100%"),this.#i=!1,this.rendered=!0}}get[j](){return this.#t}get loaded(){return this.#r}get errors(){return[...this.#e,...this.#s]}get version(){return"1.1.0-beta.4"}};F.prototype.update=Ct(F.prototype.update,1);$e(F).ext(we).attr({name:j+At,type:v,value:"",posUpdate:R}).attr({name:ne,type:A,value:[],posUpdate:jt}).attr({name:ne+At,type:v,posUpdate:R}).prop({name:te,type:A,value:{},posUpdate:jt}).attr({name:te+At,type:v,posUpdate:R}).attr({name:ee,type:A,value:{},posUpdate:jt}).attr({name:ee+At,type:v,posUpdate:R}).attr({name:"value",set(t){this.data={value:t}},get(){return this.data?.value}}).tag("grapper-view").alias("g-composer");var lr=t=>{t.extendSetup({extendview(e){f(e)?e(F.prototype):Object.assign(F.prototype,e)}})};rt.install(lr).install(Qe).install(tn);})();